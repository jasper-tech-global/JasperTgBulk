{% extends "layout.html" %}
{% block content %}
<h2>SMTP Profiles</h2>
<form method="post" action="/smtp">
  <label>Name <input name="name" required /></label>
  <label>Host <input name="host" required /></label>
  <label>Port <input type="number" name="port" value="587" required /></label>
  <label>Username <input name="username" required /></label>
  <label>Password <input type="password" name="password" required /></label>
  <label>Use TLS <input type="checkbox" name="use_tls" /></label>
  <label>Use STARTTLS <input type="checkbox" name="use_starttls" checked /></label>
  <label>From Name <input name="from_name" /></label>
  <label>From Email <input type="email" name="from_email" required /></label>
  <button type="submit">Add</button>
</form>
<table>
  <thead><tr><th>ID</th><th>Name</th><th>Host</th><th>User</th><th>From</th><th>Security</th><th>Actions</th></tr></thead>
  <tbody>
  {% for r in rows %}
    <tr>
      <td>{{ r.id }}</td>
      <td>{{ r.name }}</td>
      <td>{{ r.host }}:{{ r.port }}</td>
      <td>{{ r.username }}</td>
      <td>{{ r.from_name }} &lt;{{ r.from_email }}&gt;</td>
      <td>{% if r.use_tls %}TLS{% elif r.use_starttls %}STARTTLS{% else %}None{% endif %}</td>
      <td>
        <form class="inline" method="post" action="/smtp/{{ r.id }}/delete"><button type="submit">Delete</button></form>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
